---
title: Architecture
description: Here is the complete architecture of a Zap.ts application compared to a traditional Next.js application.
---
# Overview

Zap.ts architecture is designed to be modular, scalable, and easy to maintain. It leverages the power of TypeScript and modern web development practices to provide a robust foundation for building applications.

Since Zap.ts is built on top of [Next.js](https://nextjs.org/), it inherits all the features and benefits of the Next.js framework while introducing its own conventions and best practices.

Below, we will compare the architecture of a Zap.ts application with that of a traditional Next.js application.

## Dependency Overview

Zap.ts builds on top of Next.js, extending its classic dependencies and adding many more for enhanced features, developer experience, and scalability. Dependencies are grouped below for clarity.

### Classic Dependencies

- [`next`](https://nextjs.org/): The core React framework for server-side rendering, routing, and static site generation.
- [`react`](https://react.dev/): The foundational library for building user interfaces.
- [`react-dom`](https://react.dev/): Provides DOM-specific methods for React.
- [`tailwindcss`](https://tailwindcss.com/): Utility-first CSS framework for rapid UI development.

### Zap.ts Additional Dependencies

- [`@ai-sdk/openai`](https://ai-sdk.dev/providers/ai-sdk-providers/openai): Integrates OpenAI models for AI features.
- [`@ai-sdk/mistral`](https://ai-sdk.dev/providers/ai-sdk-providers/mistral): Integrates Mistral models for AI features.
- [`@ai-sdk/react`](https://ai-sdk.dev/docs/introduction): React bindings for AI SDK.
- [`@bprogress/next`](https://bprogress.vercel.app/): Progress bar for Next.js apps.
- [`@flags-sdk/posthog`](https://flags-sdk.dev/providers/posthog): Feature flags and analytics integration.
- [`@hookform/resolvers`](https://react-hook-form.com/docs/useform/#resolver): Validation resolvers for React Hook Form.
- [`@mdx-js/loader`, `@mdx-js/react`](https://mdxjs.com/): MDX integration for JSX in Markdown.
- [`@neondatabase/serverless`](https://neon.tech/): Serverless PostgreSQL driver for scalable DB access.
- [`@next/bundle-analyzer`](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer): Bundle analysis for Next.js apps.
- [`@orpc/client`, `@orpc/react-query`, `@orpc/server`](https://orpc.unnoq.com/): oRPC for typed remote procedure calls and API integration.
- [`@polar-sh/better-auth`, `@polar-sh/sdk`](https://polar.sh/): Payment processing integrated with [Better Auth](https://better-auth.com/).
- [`@react-email/components`](https://react.email/): Build and send emails with React components.
- [`@tanstack/react-query`, `@tanstack/react-query-devtools`](https://tanstack.com/query/latest): Powerful data fetching and caching for React.
- [`@types/mdx`](https://www.npmjs.com/package/@types/mdx): TypeScript types for MDX.
- [`@vercel/analytics`, `@vercel/speed-insights`](https://vercel.com/analytics): Analytics for Vercel-hosted apps and performance monitoring.
- [`ai`](https://ai-sdk.dev/): Vercel AI SDK for LLMs and generative AI features.
- [`better-auth`](https://better-auth.com/): Authentication solution for modern apps.
- [`class-variance-authority`](https://cva.style/): Utility for managing class names and variants in React.
- [`client-only`](https://nextjs.org/docs/app/getting-started/server-and-client-components#preventing-environment-poisoning): Next.js component for client-only rendering.
- [`clsx`](https://github.com/lukeed/clsx): Utility for constructing className strings conditionally.
- [`cmdk`](https://cmdk.paco.me/): Command menu component for React.
- [`date-fns`](https://date-fns.org/): Modern date utility library.
- [`dotenv`](https://www.dotenv.org/): Loads environment variables from `.env` files.
- [`drizzle-orm`](https://orm.drizzle.team/): TypeScript ORM for SQL databases, with migration and schema tools.
- [`embla-carousel-react`](https://www.embla-carousel.com/): Carousel component for React.
- [`flags`](https://flags-sdk.dev/): Feature flagging and remote config.
- [`gray-matter`](https://github.com/jonschlinkert/gray-matter): Parse front matter from Markdown files.
- [`input-otp`](https://input-otp.rodz.dev/): One-time password input component for React.
- [`lucide-react`](https://lucide.dev/): Icon library for React.
- [`motion`](https://motion.dev/): Animation library for React.
- [`next-mdx-remote`](https://github.com/hashicorp/next-mdx-remote): Load MDX content remotely in Next.js.
- [`next-sitemap`](https://github.com/iamvishnusankar/next-sitemap): Sitemap generation for Next.js apps.
- [`next-themes`](https://github.com/pacocoursey/next-themes): Theme switching for Next.js apps.
- [`nuqs`](https://nuqs.47ng.com/): Type-safe URL search params for React.
- [`pg`](https://node-postgres.com/): PostgreSQL client for Node.js.
- [`posthog-js`, `posthog-node`](https://posthog.com/): Analytics and event tracking.
- [`radix-ui`](https://www.radix-ui.com/): Primitives for building accessible UI components.
- [`react-day-picker`](https://react-day-picker.js.org/): Date picker component for React.
- [`react-email`](https://react.email/): Email templates and sending with React.
- [`react-hook-form`](https://react-hook-form.com/): Form management for React.
- [`react-resizable-panels`](https://react-resizable-panels.vercel.app/): Resizable panel UI for React.
- [`react-syntax-highlighter`](https://github.com/react-syntax-highlighter/react-syntax-highlighter): Syntax highlighting for code blocks.
- [`recharts`](https://recharts.org/): Charting library for React.
- [`resend`](https://resend.com/): Email sending service.
- [`schema-dts`](https://github.com/google/schema-dts): TypeScript types for schema.org.
- [`serialize-javascript`](https://github.com/yahoo/serialize-javascript): Serialize JS data for transfer.
- [`server-only`](https://nextjs.org/docs/app/getting-started/server-and-client-components#preventing-environment-poisoning): Next.js component for server-only rendering.
- [`sonner`](https://sonner.emilkowal.ski/): Toast notification library for React.
- [`tailwind-merge`](https://github.com/dcastil/tailwind-merge): Merge Tailwind CSS classes intelligently.
- [`tailwindcss-animate`](https://github.com/jamiebuilds/tailwindcss-animate): Animation utilities for Tailwind CSS.
- [`vaul`](https://vaul.emilkowal.ski/): Drawer component for React.
- [`web-push`](https://github.com/web-push-libs/web-push): Push notifications for web apps.
- [`zod`](https://zod.dev/): TypeScript-first schema validation.
- [`zustand`](https://zustand-demo.pmnd.rs/): State management for React.

### Classic Dev Dependencies

- [`@biomejs/biome`](https://biomejs.dev/): Fast linter and formatter for TypeScript/JavaScript.
- [`@tailwindcss/postcss`](https://tailwindcss.com/docs/installation/using-postcss): PostCSS plugin for Tailwind integration.
- `@types/*`: TypeScript type definitions for Node, React, etc.
- [`typescript`](https://www.typescriptlang.org/): Type-safe JavaScript development.

### Zap.ts Additional Dev Dependencies

- [`@react-email/preview-server`](https://react.email/): Development server for previewing React Email templates.
- [`create-zap-app`](https://zap-ts.alexandretrotel.org/docs/cli/overview): CLI for creating and managing Zap.ts projects.
- [`cross-env`](https://github.com/kentcdodds/cross-env): Run scripts that set and use environment variables across platforms.
- [`drizzle-kit`](https://orm.drizzle.team/docs/kit-overview#migrations-with-drizzle-kit): CLI for Drizzle ORM migrations and schema generation.
- [`react-scan`](https://react-scan.vercel.app/): Library to automatically detects performance issues in your React app.
- [`ultracite`](https://ultracite.ai/): AI-powered linter/formatter for collaborative coding between humans and AI.

Zap.ts also includes many dev tools and scripts for database management, email previews, code analysis, and more, making it a full-featured boilerplate for modern web apps.

## Files & Folders

In the below section, we explain all files and folders present in a typical Zap.ts project structure compared to a standard Next.js project. Next to each file, you'll find a color code (green, yellow, and red) indicating its status.

- ðŸŸ¢ Added
- ðŸŸ¡ Modified
- ðŸ”´ Removed

### Root & Public

<FileList>
<FileEntry name="public/" 
  status="modified" 
  required
  folder>
Removed [Vercel](https://vercel.com/) default files and added standard files for a better [SEO (Search Engine Optimization)](https://developers.google.com/search/docs/fundamentals/seo-starter-guide).
</FileEntry>

<FileEntry name="public/sw.js" status="added" plugins={['pwa']}>
Added a service worker for [PWA (Progressive Web App)](https://nextjs.org/docs/app/guides/progressive-web-apps) support with [push notification](https://developer.mozilla.org/en-US/docs/Web/API/Push_API) capabilities.
</FileEntry>

<FileEntry name="public/fonts/" status="added" required folder>
Added custom fonts for the project such as [Geist](https://vercel.com/font).
</FileEntry>

<FileEntry name="src/app/favicon.ico" status="modified" required>
Replaced default [Next.js](https://nextjs.org/) favicon with Zap.ts favicon.
</FileEntry>

<FileEntry name="src/app/globals.css" status="modified" required>
Replaced default [Next.js](https://nextjs.org/) global styles by integrating [shadcn/ui](https://ui.shadcn.com/) styles by default and adding custom global styles.
</FileEntry>

<FileEntry name="src/app/layout.tsx" status="modified" required>
Replaced default [Next.js](https://nextjs.org/) layout with a custom layout in Zap.ts with [shadcn/ui](https://ui.shadcn.com/) integration, [Geist](https://vercel.com/font) font, additional metadata for better [SEO (Search Engine Optimization)](https://developers.google.com/search/docs/fundamentals/seo-starter-guide), custom providers injection and [Vercel](https://vercel.com/) analytics support depending on the environment.
</FileEntry>
</FileList>

### Configurations

<FileList>
  <FileEntry name="biome.json" status="added" required>
    Configuration file for [Biome](https://biomejs.dev/), a linter and code formatter. We're using [Ultracite](https://ultracite.ai/) preset for better collaborations between AI and developers.
  </FileEntry>

  <FileEntry name="next.config.ts" status="modified" required>
    Configuration file for [Next.js](https://nextjs.org/) that includes additional settings for [CSP (Content Security Policy)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP) and [Permissions Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy), sets up [Typed Routes](https://nextjs.org/docs/app/api-reference/config/next-config-js/typedRoutes) by default, adds extra [security headers](https://nextjs.org/docs/app/api-reference/config/next-config-js/headers), configures [sw.js](https://nextjs.org/docs/app/guides/progressive-web-apps#5-creating-a-service-worker), and supports [MDX](https://nextjs.org/docs/app/guides/mdx) along with [Bundle Analyzer](https://nextjs.org/docs/app/getting-started/linking-and-navigating#hydration-not-completed).
  </FileEntry>

  <FileEntry name="package.json" status="modified" required>
    Configuration file for [npm](https://www.npmjs.com/) with additional scripts for [Biome](https://biomejs.dev/), [Drizzle ORM](https://orm.drizzle.team/), [Next.js](https://nextjs.org/), [React Email](https://react.email/) and more. Also includes [lint-staged](https://github.com/okonet/lint-staged) configuration with [Ultracite](https://ultracite.ai/) preset.
  </FileEntry>

  <FileEntry name="tsconfig.json" status="modified" required>
    TypeScript configuration file with paths and settings optimized for Zap.ts such as `strictNullChecks`.
  </FileEntry>
</FileList>

### Pages

<FileList>
<FileEntry name="src/app/(protected)/app/(sidebar)/" 
  status="added"
  plugins={["sidebar"]}
  folder>
Added protected routes for authenticated users with a sidebar layout. This includes pages for account management, notifications, settings, and billing. Included pages are: `/app`, `/app/account` (WIP), `/app/notifications` (WIP), `/app/settings` (WIP).
</FileEntry>

<FileEntry name="src/app/(protected)/app/billing/" status="added" plugins={["payments"]} folder>
  Added billing routes for user billing information and a billing success page. Included pages are: `/app/billing`, `/app/billing/success`.
</FileEntry>

<FileEntry name="src/app/(public)/(auth)/" status="added" plugins={["auth"]} folder>
  Added public authentication routes for user login, registration, password recovery, and mail verification. Included pages are: `/forgot-password`, `/login`, `/mail-verified`, `/register`, and `/reset-password`.
</FileEntry>

<FileEntry name="src/app/(public)/(legal)/" status="added" plugins={["legal"]} folder>
  Added public legal routes for cookie policy, privacy policy, and terms of service. Included pages are: `/cookie-policy`, `/privacy-policy`, and `/terms-of-service`.
</FileEntry>

<FileEntry name="src/app/(public)/blog/" 
  status="added"
  plugins={['blog']}
  folder>
Added public blog routes for displaying blog posts and a blog landing page. This includes dynamic routing for individual blog posts based on their slug. Included pages are: `/blog`, `/blog/[slug]`.
</FileEntry>

<FileEntry name="src/app/(public)/page.tsx" status="added" required>
  Public landing page for the application.
</FileEntry>

<FileEntry name="src/app/(public)/waitlist/" status="added" plugins={["waitlist"]}>
  Waitlist page for users to join the waitlist. Included pages are: `/waitlist`.
</FileEntry>

<FileEntry
  name="src/app/page.tsx"
  status="deleted">
Default [Next.js](https://nextjs.org/) homepage, replaced by a custom homepage in Zap.ts.
</FileEntry>
</FileList>

### Routes

- `src/app/api/auth/[...all]/route.ts`: Authentication API route for handling all auth-related requests with [Better Auth](https://better-auth.com).
- `src/app/rpc/[[...rest]]/route.ts`: RPC API route for handling all RPC-related requests with [oRPC](https://orpc.unnoq.com).

### Components

- `src/components/ui/*`: Various UI components from [shadcn/ui](https://ui.shadcn.com/) such as `Alert`, `Avatar`, `Badge`, `Button`, `Card`, `Checkbox`, `Collapsible`, `Command`, `Dialog`, `Dropdown Menu`, `Form`, `Hover Card`, `Input`, `Label`, `Link`, `List Box`, `Menubar`, `Navigation Menu`, `Popover`, `Progress`, `Radio Group`, `Scroll Area`, `Select`, `Separator`, `Sheet`, `Skeleton`, `Slider`, `Switch`, `Tabs`, `Textarea`, and more. Note that [Ultracite](https://ultracite.ai/) ignores this directory to keep original code.

### Hooks

- `src/hooks/use-mobile.ts`: Custom hook for detecting mobile devices and handling mobile-specific logic. This is needed by [shadcn/ui](https://ui.shadcn.com/).
- `src/hooks/utils/use-body-scroll-lock.ts`: Custom hook for managing body scroll locking in modals and other components.
- `src/hooks/utils/use-cooldown.ts`: Custom hook for implementing cooldowns on actions (e.g., mail ratelimits).

### Libraries

- `src/lib/fetch.ts`: Custom fetch wrapper for making API requests with [Zod](https://zod.dev/) validation and error handling.
- `src/lib/plugins.ts`: Plugin management library for handling Zap.ts plugins.
- `src/lib/utils.ts`: Utility functions such as `cn` (class names) that is needed by [shadcn/ui](https://ui.shadcn.com/).

### Middleware

- `src/middleware.ts`: Custom middleware for handling requests and responses in Zap.ts. It integrates `auth`, `waitlist` and `blog` plugins in its logic to provide a seamless experience across the application.

### Providers

- `src/providers/providers.tsx`: Context providers for managing global state and dependencies in Zap.ts such as `ThemeProvider` for theming, `ProgressProvider` for progress bar with [BProgress](https://bprogress.vercel.app/), `NuqsAdapter` to integrate [nuqs](https://nuqs.47ng.com/) to manage search params with type safety and `PluginProviders` to inject providers from Zap.ts plugins.
- `src/providers/theme.provider.tsx`: Theme provider for managing light and dark themes in the application with [next-themes](https://github.com/pacocoursey/next-themes).

### Zap.ts Specific

- `zap.config.ts`: Configuration file for Zap.ts.
- `zap.config.types.ts`: Type definitions for Zap.ts configuration.
- `zap/*`: Zap.ts plugin directories such as `auth`, `blog`, and `waitlist`. Each plugin contains its own routes, components, hooks, and other necessary files to provide specific functionality to the application.

## To sort (added folders/files)

- `.cursor/`: Contains [MCP (Model Context Protocol)](https://modelcontextprotocol.io/) that allows LLMs in [Cursor](https://cursor.com/) to get more context with external services such as [Supabase](https://supabase.com/), [PostHog](https://posthog.com/), and more.
- `.cursorignore`: Similar to `.gitignore`, this file specifies which files and directories should be ignored by [Cursor](https://cursor.com/).
- `.dockerignore`: Similar to `.gitignore`, this file specifies which files and directories should be ignored by [Docker](https://www.docker.com/).
- `.github/`: Contains [GitHub](https://github.com/) specific files such as workflows for CI/CD, instructions for [Copilot](https://github.com/features/copilot).
- `.gitignore`: Specifies which files and directories should be ignored by [Git](https://git-scm.com/).
- `.npmrc`: Configuration file for [npm](https://www.npmjs.com/).
- `.vscode/`: Contains [Visual Studio Code](https://code.visualstudio.com/) specific settings and configurations such as [MCP (Model Context Protocol)](https://modelcontextprotocol.io/), debugging configurations, and more.
- `.windsurf/`: Contains [Windsurf](https://windsurf.com/) specific settings and configurations such as [MCP (Model Context Protocol)](https://modelcontextprotocol.io/).
- `Dockerfile.*`: Contains the instructions for building a Docker image for the application following [Next.js Docker best practices](https://github.com/vercel/next.js/tree/canary/examples/with-docker) in production or provisioning a [PostgreSQL](https://www.postgresql.org/) database in development.
- `docker-compose.yml`: Configuration file for [Docker Compose](https://docs.docker.com/compose/) to define and run multi-container Docker applications (such as Zap.ts and PostgreSQL).
- `components.json`: Configuration file for [shadcn/ui](https://ui.shadcn.com/), a set of accessible and customizable React components.
- `drizzle.config.*.ts`: Configuration files for [Drizzle ORM](https://orm.drizzle.team/), an ORM for TypeScript and JavaScript with separate config for development and production environments.
- `emails/`: Contains email templates and allows for easy customization and management of email content through a mail server using [React Email](https://react.email/).
- `next-sitemap.config.js`: Configuration file for [next-sitemap](https://github.com/iamvishnusankar/next-sitemap), a sitemap generation tool for Next.js applications.
- `src/app/apple-icon.png`: Added Apple Touch Icon for better [SEO (Search Engine Optimization)](https://developers.google.com/search/docs/fundamentals/seo-starter-guide).
- `src/app/fonts.ts`: Configuration file for [Geist](https://vercel.com/font) font to be used in the application.
- `src/app/global-error.tsx`: Global error handling component for the application with a sophisticated error messages management.
- `src/app/icon.png`: Added standard icon for better [SEO (Search Engine Optimization)](https://developers.google.com/search/docs/fundamentals/seo-starter-guide).
- `src/app/manifest.ts`: Configuration file for the [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest) to provide metadata for the application when installed on a device or added to the home screen as a [PWA (Progressive Web App)](https://web.dev/progressive-web-apps/).
- `src/app/not-found.tsx`: Beautiful custom 404 page for handling "Not Found" errors in the application.
- `src/app/opengraph-image/route.tsx`: Dynamic Open Graph image generation route using [OG Image](https://og-image.vercel.app/) to create social media preview images on the fly.
- `src/instrumentation.edge.ts`: Instrumentation for the Edge runtime environment.
- `src/instrumentation.node.ts`: Instrumentation for the Node.js runtime environment.
- `src/instrumentation.ts`: Shared instrumentation code for both Edge and Node.js environments, following [Next.js instrumentation guidelines](https://nextjs.org/docs/app/guides/instrumentation#importing-runtime-specific-code).